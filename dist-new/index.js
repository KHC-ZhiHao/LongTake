!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.LongTake=e():t.LongTake=e()}(this||("undefined"!=typeof window?window:global),(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist-new/",n(n.s=2)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Base=void 0;var r=function(){function t(t){this._baseAttr={name:t||"No module base name.",listeners:new Map}}return t.prototype.on=function(t,e){var n,r=Date.now().toString()+Math.floor(1e5*Math.random()).toString(),i=t;return this._baseAttr.listeners.has(i)&&this._baseAttr.listeners.set(i,[]),null===(n=this._baseAttr.listeners.get(i))||void 0===n||n.push({id:r,callback:e}),r},t.prototype.off=function(t,e){var n=this._baseAttr.listeners.get(t);n&&this._baseAttr.listeners.set(t,n.filter((function(t){return t.id!==e})))},t.prototype.emit=function(t,e){var n=this._baseAttr.listeners.get(t);n&&n.forEach((function(t){return t.callback({id:t.id,data:e})}))},t.prototype.systemError=function(t,e,n){throw n&&(console.log("%c error object is : ","color:#FFF; background:red"),console.log(n)),new Error("(☉д⊙) Longtake!! "+this._baseAttr.name+" => "+t+" -> "+e)},t}();e.Base=r},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Bitmap=void 0;var o=function(t){function e(e){void 0===e&&(e=document.createElement("canvas"));var n=t.call(this,"Bitmap")||this;return n.cache=!1,n.imgData=null,n.imgBitmap=null,n.canvas=e,n.context=n.canvas.getContext("2d"),n._width=n.canvas.width,n._height=n.canvas.height,n}return i(e,t),e.isBitmap=function(t){return t instanceof this},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this.canvas.width=t||1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this.canvas.height=t||1},enumerable:!1,configurable:!0}),e.prototype.getRenderTarget=function(){return this.cache?(null==this.imgBitmap&&this.cacheImageBitmap(),this.imgBitmap):this.canvas},e.prototype.resize=function(t,e){this.width=null!=t?t:this.width,this.height=null!=e?e:this.height},e.prototype.clear=function(){this.context&&this.context.clearRect(0,0,this.width,this.height)},e.prototype.cacheImageBitmap=function(){var t=this,e=new Image;e.onload=function(){t.imgBitmap=e},e.src=this.canvas.toDataURL()},e.prototype.clearCache=function(){this.imgData=null,this.imgBitmap=null},e.prototype.getPixel=function(t,e){var n=this.getImageData();if(n){var r=t*(4*n.width)+4*e;return[n.data[r],n.data[r+1],n.data[r+2],n.data[r+3]]}return[0,0,0,0]},e.prototype.getImageData=function(){return null==this.imgData&&this.context&&(this.imgData=this.context.getImageData(0,0,this.width,this.height)),this.imgData},e.prototype.putImageData=function(t){this.context&&(this.clear(),this.context.putImageData(t,0,0))},e}(n(0).Base);e.Bitmap=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LongTake=void 0;var r=n(3);t.exports=r.Core,t.exports.LongTake=r.Core,e.LongTake=r.Core,e.default=r.Core},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Core=void 0;var o=n(0),a=n(4),s=n(5),c=function(t){function e(e,n,r){var i=t.call(this,"Main")||this;return i.ticker=0,i.baseFps=0,i.viewScale=1,i.remove=!1,i.camera=new a.Camera(i),i.framePerSecond=60,i.animationFrame=window.requestAnimationFrame||function(t){return setTimeout(t,1e3/60)},i.width=n,i.height=r,i.target=e,i.context=i.target.getContext("2d"),i.container=new s.Container(i.width,i.height,i),i.update(),i}return i(e,t),Object.defineProperty(e.prototype,"targetRect",{get:function(){return this.target.getBoundingClientRect()},enumerable:!1,configurable:!0}),e.prototype.setFPS=function(t){"number"==typeof t&&t>0&&t<=60?this.framePerSecond=t:this.systemError("setFPS","FPS must between 1 to 60.",t)},e.prototype.close=function(){this.remove=!0},e.prototype.setCamera=function(t,e){this.camera.x=t,this.camera.y=e},e.prototype.targetResize=function(t,e){this.target.width=t,this.target.height=e},e.prototype.addChildren=function(t){this.container.addChildren(t)},e.prototype.update=function(){var t=this;if(!0===this.remove)return null;this.baseFps+=this.framePerSecond,this.stageUpdate(),this.baseFps>=60&&(this.bitmapUpdate(),this.baseFps=this.baseFps%60),this.ticker=this.animationFrame((function(){return t.update()}))},e.prototype.stageUpdate=function(){this.container.stageUpdate()},e.prototype.bitmapUpdate=function(){this.container.stageRender(),this.context.clearRect(0,0,this.width,this.height),this.context.drawImage(this.container.bitmap.canvas,-this.camera.offsetX,-this.camera.offsetY)},e}(o.Base);e.Core=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Camera=void 0;var r=function(){function t(t){this.x=0,this.y=0,this.core=t}return Object.defineProperty(t.prototype,"offsetX",{get:function(){return this.checkBorder(this.x,this.core.width*this.core.viewScale,this.core.targetRect.width)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetY",{get:function(){return this.checkBorder(this.y,this.core.height*this.core.viewScale,this.core.targetRect.height)},enumerable:!1,configurable:!0}),t.prototype.checkBorder=function(t,e,n){var r=t*this.core.viewScale,i=n/2;return r>i?r>e-i?e-n:(r-i)/this.core.viewScale:0},t}();e.Camera=r},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;var o=n(0),a=n(6),s=n(1),c=function(t){function e(e,n,r){var i=t.call(this,"Container")||this;return i.stage=new a.Sprite("Stage"),i.pointerX=0,i.pointerY=0,i.stackOpacity=[],i.core=r||null,i.stage.resize(0,0),i.stage.render=function(){return i.stage.cache()},i.bitmap=new s.Bitmap,i.bitmap.resize(e,n),i}return i(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this.bitmap.canvas.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.bitmap.canvas.height},enumerable:!1,configurable:!0}),e.prototype.stageUpdate=function(){this.stage._mainUpdate()},e.prototype.stageRender=function(){this.stage._mainRender(),this.draw()},e.prototype.addChildren=function(t){this.stage.addChildren(t)},e.prototype.draw=function(){this.bitmap.clear(),this.render(this.stage)},e.prototype.render=function(t){var e=this;if(t.canShow()){var n=Math.round(t.screenX),r=Math.round(t.screenY),i=t.getRealPosition();if(this.transform(t),i.x<this.width&&i.y<this.height){var o=t.bitmap.getRenderTarget();o&&this.bitmap.context.drawImage(o,n,r)}t.eachChildren((function(t){return e.render(t)})),this.restore(t)}},e.prototype.transform=function(t){var e=this.bitmap.context;if(1===t.scaleHeight&&1===t.scaleWidth||e.save(),255!==t.opacity){this.stackOpacity.push(t.opacity);var n=this.stackOpacity.reduce((function(t,e){return t+e}),0);e.globalAlpha=n/(255*this.stackOpacity.length)}if("source-over"!==t.blendMode&&(e.globalCompositeOperation=t.blendMode),!1===t.hasTransform())return null;var r=t.posX,i=t.posY;e.translate(r,i),1===t.scaleHeight&&1===t.scaleWidth||e.scale(t.scaleWidth,t.scaleHeight),0!==t.rotation&&e.rotate(t.rotation*t.helper.arc),0===t.skewX&&0===t.skewY||e.transform(1,t.skewX,t.skewY,1,0,0),e.translate(-r,-i)},e.prototype.restore=function(t){var e=this.bitmap.context;if(1!==t.scaleHeight||1!==t.scaleWidth)return e.restore(),null;if(255!==t.opacity)if(this.stackOpacity.pop(),0===this.stackOpacity.length)e.globalAlpha=1;else{var n=this.stackOpacity.reduce((function(t,e){return t+e}),0);e.globalAlpha=n/(255*this.stackOpacity.length)}if("source-over"!==t.blendMode&&(e.globalCompositeOperation="source-over"),!1===t.hasTransform())return null;var r=t.posX,i=t.posY;e.translate(r,i),0!==t.rotation&&e.rotate(-t.rotation*t.helper.arc),0===t.skewX&&0===t.skewY||e.transform(1,-t.skewX,-t.skewY,1,0,0),e.translate(-r,-i)},e}(o.Base);e.Container=c},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.Sprite=void 0;var a=n(0),s=n(7),c=n(1),h=function(t){function e(e){var n=t.call(this,e||"Sprite")||this;return n.parent=null,n.helper=s.helper,n.bitmap=new c.Bitmap,n.context=n.bitmap.context,n.children=[],n.status={cache:!1,remove:!1,hidden:!1,needSort:!1,installed:!1},n.transform={skewX:0,skewY:0,scaleWidth:1,scaleHeight:1,rotation:0,opacity:255,blendMode:"source-over"},n.position={x:0,y:0,z:0,anchorX:0,anchorY:0},n.name=e||"no name",n}return i(e,t),e.isSprite=function(t){return t instanceof this},e.prototype.eachChildren=function(t){for(var e=this.children.length,n=0;n<e;n++)t(this.children[n])},e.prototype.eachChildrenDeep=function(t){var e=function(n){n.eachChildren((function(n){t(n),e(n)}))};e(this)},e.prototype.install=function(){!1===this.status.installed?(this.status.installed=!0,this.create()):this.systemError("install","sprite installed",this)},e.prototype.create=function(){},Object.defineProperty(e.prototype,"width",{get:function(){return this.bitmap.width},set:function(t){this.bitmap.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.bitmap.height},set:function(t){this.bitmap.height=t},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e){this.bitmap.resize(t,e)},e.prototype.addChildren=function(t){e.isSprite(t)?null==t.parent?(t.parent=this,this.children.push(t),this.sortChildren()):this.systemError("addChildren","Sprite have parent.",t):this.systemError("addChildren","Object not a sprite",t)},e.prototype.sortChildren=function(){var t,e,n=[],r=[];this.eachChildren((function(t){null==r[t.z]&&(r[t.z]=[]),r[t.z].push(t)}));try{for(var i=o(r),a=i.next();!a.done;a=i.next()){var s=a.value;s&&(n=n.concat(s))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}this.children=n},e.prototype.hasTransform=function(){var t=this.transform;return 0!==t.skewX||(0!==t.skewY||(1!==t.scaleWidth||(1!==t.scaleHeight||0!==t.rotation)))},e.prototype.scale=function(t,e){this.scaleWidth=t,this.scaleHeight=null==e?t:e},Object.defineProperty(e.prototype,"scaleWidth",{get:function(){return this.transform.scaleWidth},set:function(t){this.transform.scaleWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleHeight",{get:function(){return this.transform.scaleHeight},set:function(t){this.transform.scaleHeight=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenScaleWidth",{get:function(){return null==this.parent?this.scaleWidth:this.scaleWidth*this.parent.screenScaleWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenScaleHeight",{get:function(){return null==this.parent?this.scaleHeight:this.scaleHeight*this.parent.screenScaleHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t%360},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.transform.blendMode},set:function(t){this.transform.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"opacity",{get:function(){return this.transform.opacity},set:function(t){t<=0&&(t=0),t>=255&&(t=255),this.transform.opacity=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skewX",{get:function(){return this.transform.skewX},set:function(t){this.transform.skewX=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skewY",{get:function(){return this.transform.skewY},set:function(t){this.transform.skewY=t},enumerable:!1,configurable:!0}),e.prototype.setAnchor=function(t,e){this.anchorX=t,this.anchorY=null==e?t:e},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.position.x=t||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.position.y=t||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this.position.z},set:function(t){this.position.z=t,this.parent&&(this.parent.status.needSort=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenX",{get:function(){var t=this.x-this.width*this.anchorX;return this.parent&&(t+=this.parent.screenX+this.parent.width*this.parent.anchorX),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenY",{get:function(){var t=this.y-this.height*this.anchorY;return this.parent&&(t+=this.parent.screenY+this.parent.height*this.parent.anchorY),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"posX",{get:function(){return this.screenX+this.width*this.anchorX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"posY",{get:function(){return this.screenY+this.height*this.anchorY},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchorX",{get:function(){return this.position.anchorX},set:function(t){this.position.anchorX=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchorY",{get:function(){return this.position.anchorY},set:function(t){this.position.anchorY=t},enumerable:!1,configurable:!0}),e.prototype.canRender=function(){return!this.status.cache},e.prototype.canShow=function(){return!this.status.hidden},e.prototype.cache=function(){this.status.cache=!0,this.bitmap.cache=!0},e.prototype.unCache=function(){this.status.cache=!1,this.bitmap.cache=!1},e.prototype.hidden=function(t){this.status.hidden=!t||!!t},e.prototype.unHidden=function(){this.status.hidden=!1},e.prototype.getRealSize=function(){var t=this.width+this.skewY*this.height,e=this.height+this.skewX*this.width,n=Math.abs(this.helper.sinByRad(this.rotation)),r=Math.abs(this.helper.cosByRad(this.rotation));return{width:(t*r+e*n)*this.screenScaleWidth,height:(e*r+t*n)*this.screenScaleHeight}},e.prototype.getRealPosition=function(){return{x:this.screenX*(null==this.parent?1:this.parent.screenScaleWidth),y:this.screenY*(null==this.parent?1:this.parent.screenScaleHeight)}},e.prototype.update=function(){},e.prototype._mainUpdate=function(){var t=!1;this.status.needSort&&(this.status.needSort=!1,this.sortChildren()),this.update(),this.eachChildren((function(e){0==e.status.remove?e._mainUpdate():t=!0})),t&&(this.children=this.children.filter((function(t){return!t.status.remove||(t.parent=null,!1)})))},e.prototype.remove=function(){this.status.remove=!0},e.prototype.removeChild=function(t){t.parent===this?t.remove():this.systemError("removeChild","Sprite not found",t)},e.prototype.clearChildren=function(){var t=this;this.eachChildren((function(e){return t.removeChild(e)}))},e.prototype.render=function(){},e.prototype._mainRender=function(){this.eachChildren((function(t){return t._mainRender()})),this.context&&this.canRender()&&(this.context.save(),this.render(),this.context.restore(),this.context.restore(),this.bitmap.clearCache())},e.prototype.fromImage=function(t){var e=this;return this.resize(t.width,t.height),this.render=function(){var n;null===(n=e.context)||void 0===n||n.drawImage(t,0,0),e.cache()},this},e.prototype.inRect=function(t,e){var n=this.getRealSize(),r=this.getRealPosition();return t>=r.x&&t<=r.x+n.width&&e>=r.y&&e<=r.y+n.height},e}(a.Base);e.Sprite=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.helper=void 0;for(var r=Math.PI/180,i=180/Math.PI,o={},a=-360;a<360;a++)o[a]={sin:Math.sin(a*r),cos:Math.cos(a*r)};e.helper={arc:r,rarc:i,sinByRad:function(t){return o[Math.round(t)]?o[Math.round(t)].sin:Math.sin(t*r)},cosByRad:function(t){return o[Math.round(t)]?o[Math.round(t)].cos:Math.cos(t*r)},getVector:function(t,n){return{x:n*e.helper.cosByRad(t),y:n*e.helper.sinByRad(t)}},randInt:function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},getAngle:function(t,e,n,r){if(t===n&&e===r)return 0;var o=Math.atan2(r-e,n-t)*i;return o>0?o:360+o},getVisibility:function(){var t=document.body.clientWidth;return t<600?"xs":t>=600&&t<960?"sm":t>=960&&t<1264?"md":t>=1264&&t<1904?"lg":"xl"}}}])}));